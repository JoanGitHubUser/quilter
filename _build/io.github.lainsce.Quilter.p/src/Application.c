/* Application.c generated by valac 0.50.2, the Vala compiler
 * generated from Application.vala, do not modify */

/*
* Copyright (c) 2017-2021 Lains
*
* This program is free software; you can redistribute it and/or
* modify it under the terms of the GNU General Public
* License as published by the Free Software Foundation; either
* version 2 of the License, or (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
* General Public License for more details.
*
* You should have received a copy of the GNU General Public
* License along with this program; if not, write to the
* Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
* Boston, MA 02110-1301 USA
*
*/

#include <gtk/gtk.h>
#include <glib-object.h>
#include <handy.h>
#include <gio/gio.h>
#include <glib.h>
#include <stdlib.h>
#include <string.h>
#include <locale.h>
#include <stdio.h>
#include <glib/gstdio.h>

#define QUILTER_TYPE_APPLICATION (quilter_application_get_type ())
#define QUILTER_APPLICATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), QUILTER_TYPE_APPLICATION, QuilterApplication))
#define QUILTER_APPLICATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), QUILTER_TYPE_APPLICATION, QuilterApplicationClass))
#define QUILTER_IS_APPLICATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), QUILTER_TYPE_APPLICATION))
#define QUILTER_IS_APPLICATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), QUILTER_TYPE_APPLICATION))
#define QUILTER_APPLICATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), QUILTER_TYPE_APPLICATION, QuilterApplicationClass))

typedef struct _QuilterApplication QuilterApplication;
typedef struct _QuilterApplicationClass QuilterApplicationClass;
typedef struct _QuilterApplicationPrivate QuilterApplicationPrivate;

#define QUILTER_WIDGETS_TYPE_HEADERBAR (quilter_widgets_headerbar_get_type ())
#define QUILTER_WIDGETS_HEADERBAR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), QUILTER_WIDGETS_TYPE_HEADERBAR, QuilterWidgetsHeaderbar))
#define QUILTER_WIDGETS_HEADERBAR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), QUILTER_WIDGETS_TYPE_HEADERBAR, QuilterWidgetsHeaderbarClass))
#define QUILTER_WIDGETS_IS_HEADERBAR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), QUILTER_WIDGETS_TYPE_HEADERBAR))
#define QUILTER_WIDGETS_IS_HEADERBAR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), QUILTER_WIDGETS_TYPE_HEADERBAR))
#define QUILTER_WIDGETS_HEADERBAR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), QUILTER_WIDGETS_TYPE_HEADERBAR, QuilterWidgetsHeaderbarClass))

typedef struct _QuilterWidgetsHeaderbar QuilterWidgetsHeaderbar;
typedef struct _QuilterWidgetsHeaderbarClass QuilterWidgetsHeaderbarClass;
enum  {
	QUILTER_APPLICATION_0_PROPERTY,
	QUILTER_APPLICATION_NUM_PROPERTIES
};
static GParamSpec* quilter_application_properties[QUILTER_APPLICATION_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define QUILTER_TYPE_MAIN_WINDOW (quilter_main_window_get_type ())
#define QUILTER_MAIN_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), QUILTER_TYPE_MAIN_WINDOW, QuilterMainWindow))
#define QUILTER_MAIN_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), QUILTER_TYPE_MAIN_WINDOW, QuilterMainWindowClass))
#define QUILTER_IS_MAIN_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), QUILTER_TYPE_MAIN_WINDOW))
#define QUILTER_IS_MAIN_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), QUILTER_TYPE_MAIN_WINDOW))
#define QUILTER_MAIN_WINDOW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), QUILTER_TYPE_MAIN_WINDOW, QuilterMainWindowClass))

typedef struct _QuilterMainWindow QuilterMainWindow;
typedef struct _QuilterMainWindowClass QuilterMainWindowClass;
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
#define _g_option_context_free0(var) ((var == NULL) ? NULL : (var = (g_option_context_free (var), NULL)))

struct _QuilterApplication {
	GtkApplication parent_instance;
	QuilterApplicationPrivate * priv;
	QuilterWidgetsHeaderbar* toolbar;
};

struct _QuilterApplicationClass {
	GtkApplicationClass parent_class;
};

static gpointer quilter_application_parent_class = NULL;
static gboolean quilter_application_print_ver;
static gboolean quilter_application_open_view;
static gboolean quilter_application_open_view = FALSE;
static gboolean quilter_application_print_ver = FALSE;
static gchar* quilter_application__cwd;
static gchar* quilter_application__cwd = NULL;
extern GSettings* quilter_application_gsettings;
GSettings* quilter_application_gsettings = NULL;
extern QuilterMainWindow* quilter_application_win;
QuilterMainWindow* quilter_application_win = NULL;
extern gchar** quilter_application_supported_mimetypes;
extern gint quilter_application_supported_mimetypes_length1;
gchar** quilter_application_supported_mimetypes = NULL;
gint quilter_application_supported_mimetypes_length1 = 0;

GType quilter_application_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (QuilterApplication, g_object_unref)
GType quilter_widgets_headerbar_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (QuilterWidgetsHeaderbar, g_object_unref)
GType quilter_main_window_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (QuilterMainWindow, g_object_unref)
static void quilter_application_real_activate (GApplication* base);
void quilter_application_new_win (QuilterApplication* self);
gint quilter_application_main (gchar** args,
                               gint args_length1);
QuilterApplication* quilter_application_new (void);
QuilterApplication* quilter_application_construct (GType object_type);
QuilterMainWindow* quilter_main_window_new (QuilterApplication* application);
QuilterMainWindow* quilter_main_window_construct (GType object_type,
                                                  QuilterApplication* application);
static gint quilter_application_real_command_line (GApplication* base,
                                            GApplicationCommandLine* command_line);
static void _vala_array_add1 (GFile** * array,
                       gint* length,
                       gint* size,
                       GFile* value);
QuilterMainWindow* quilter_application_get_last_win (QuilterApplication* self);
gboolean quilter_services_file_manager_open_from_outside (QuilterMainWindow* win,
                                                          GFile** ofiles,
                                                          gint ofiles_length1,
                                                          const gchar* hint);
static GObject * quilter_application_constructor (GType type,
                                           guint n_construct_properties,
                                           GObjectConstructParam * construct_properties);
static void quilter_application_finalize (GObject * obj);
static GType quilter_application_get_type_once (void);
static void _vala_array_destroy (gpointer array,
                          gint array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gint array_length,
                       GDestroyNotify destroy_func);

static const GOptionEntry QUILTER_APPLICATION_entries[4] = {{"about", 'v', 0, G_OPTION_ARG_NONE, &quilter_application_print_ver, "Open About Dialog", NULL}, {"version", 'v', 0, G_OPTION_ARG_NONE, &quilter_application_print_ver, "Print version and copyright info and exit", NULL}, {"view", 'V', 0, G_OPTION_ARG_NONE, &quilter_application_open_view, "Open document for preview", NULL}, {NULL}};

static void
quilter_application_real_activate (GApplication* base)
{
	QuilterApplication * self;
#line 42 "../src/Application.vala"
	self = (QuilterApplication*) base;
#line 43 "../src/Application.vala"
	quilter_application_new_win (self);
#line 150 "Application.c"
}

gint
quilter_application_main (gchar** args,
                          gint args_length1)
{
	QuilterApplication* app = NULL;
	QuilterApplication* _tmp0_;
	gint result = 0;
#line 47 "../src/Application.vala"
	setlocale (LC_ALL, "");
#line 49 "../src/Application.vala"
	_tmp0_ = quilter_application_new ();
#line 49 "../src/Application.vala"
	app = _tmp0_;
#line 50 "../src/Application.vala"
	result = g_application_run ((GApplication*) app, (gint) args_length1, args);
#line 50 "../src/Application.vala"
	_g_object_unref0 (app);
#line 50 "../src/Application.vala"
	return result;
#line 172 "Application.c"
}

int
main (int argc,
      char ** argv)
{
#line 46 "../src/Application.vala"
	return quilter_application_main (argv, argc);
#line 181 "Application.c"
}

void
quilter_application_new_win (QuilterApplication* self)
{
	QuilterMainWindow* _tmp0_;
	QuilterMainWindow* _tmp2_;
	QuilterMainWindow* _tmp3_;
#line 53 "../src/Application.vala"
	g_return_if_fail (self != NULL);
#line 54 "../src/Application.vala"
	_tmp0_ = quilter_application_win;
#line 54 "../src/Application.vala"
	if (_tmp0_ != NULL) {
#line 196 "Application.c"
		QuilterMainWindow* _tmp1_;
#line 55 "../src/Application.vala"
		_tmp1_ = quilter_application_win;
#line 55 "../src/Application.vala"
		gtk_window_present ((GtkWindow*) _tmp1_);
#line 56 "../src/Application.vala"
		return;
#line 204 "Application.c"
	}
#line 58 "../src/Application.vala"
	_tmp2_ = quilter_main_window_new (self);
#line 58 "../src/Application.vala"
	g_object_ref_sink (_tmp2_);
#line 58 "../src/Application.vala"
	_g_object_unref0 (quilter_application_win);
#line 58 "../src/Application.vala"
	quilter_application_win = _tmp2_;
#line 60 "../src/Application.vala"
	_tmp3_ = quilter_application_win;
#line 60 "../src/Application.vala"
	gtk_widget_show_all ((GtkWidget*) _tmp3_);
#line 218 "Application.c"
}

static gpointer
_g_object_ref0 (gpointer self)
{
#line 136 "../src/Application.vala"
	return self ? g_object_ref (self) : NULL;
#line 226 "Application.c"
}

static void
_vala_array_add1 (GFile** * array,
                  gint* length,
                  gint* size,
                  GFile* value)
{
#line 136 "../src/Application.vala"
	if ((*length) == (*size)) {
#line 136 "../src/Application.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 136 "../src/Application.vala"
		*array = g_renew (GFile*, *array, (*size) + 1);
#line 241 "Application.c"
	}
#line 136 "../src/Application.vala"
	(*array)[(*length)++] = value;
#line 136 "../src/Application.vala"
	(*array)[*length] = NULL;
#line 247 "Application.c"
}

static gint
quilter_application_real_command_line (GApplication* base,
                                       GApplicationCommandLine* command_line)
{
	QuilterApplication * self;
	gchar** args = NULL;
	gint _tmp0_ = 0;
	gchar** _tmp1_;
	gint args_length1;
	gint _args_size_;
	GOptionContext* context = NULL;
	GOptionContext* _tmp2_;
	GOptionContext* _tmp3_;
	GOptionContext* _tmp4_;
	GOptionGroup* _tmp5_;
	gint unclaimed_args = 0;
	const gchar* _tmp17_;
	GError* _inner_error0_ = NULL;
	gint result = 0;
#line 63 "../src/Application.vala"
	self = (QuilterApplication*) base;
#line 63 "../src/Application.vala"
	g_return_val_if_fail (command_line != NULL, 0);
#line 64 "../src/Application.vala"
	_tmp1_ = g_application_command_line_get_arguments (command_line, &_tmp0_);
#line 64 "../src/Application.vala"
	args = _tmp1_;
#line 64 "../src/Application.vala"
	args_length1 = _tmp0_;
#line 64 "../src/Application.vala"
	_args_size_ = args_length1;
#line 65 "../src/Application.vala"
	_tmp2_ = g_option_context_new ("File");
#line 65 "../src/Application.vala"
	context = _tmp2_;
#line 66 "../src/Application.vala"
	_tmp3_ = context;
#line 66 "../src/Application.vala"
	g_option_context_add_main_entries (_tmp3_, QUILTER_APPLICATION_entries, "io.github.lainsce.Quilter");
#line 67 "../src/Application.vala"
	_tmp4_ = context;
#line 67 "../src/Application.vala"
	_tmp5_ = gtk_get_option_group (TRUE);
#line 67 "../src/Application.vala"
	g_option_context_add_group (_tmp4_, _tmp5_);
#line 295 "Application.c"
	{
		gchar** tmp = NULL;
		gchar** _tmp6_;
		gint _tmp6__length1;
		gint tmp_length1;
		gint _tmp_size_;
		GOptionContext* _tmp7_;
		gchar** _tmp8_;
		gint _tmp8__length1;
#line 71 "../src/Application.vala"
		_tmp6_ = args;
#line 71 "../src/Application.vala"
		_tmp6__length1 = args_length1;
#line 71 "../src/Application.vala"
		tmp = _tmp6_;
#line 71 "../src/Application.vala"
		tmp_length1 = _tmp6__length1;
#line 71 "../src/Application.vala"
		_tmp_size_ = tmp_length1;
#line 72 "../src/Application.vala"
		_tmp7_ = context;
#line 72 "../src/Application.vala"
		g_option_context_parse (_tmp7_, (gint*) (&tmp_length1), &tmp, &_inner_error0_);
#line 72 "../src/Application.vala"
		_tmp_size_ = tmp_length1;
#line 72 "../src/Application.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 323 "Application.c"
			goto __catch0_g_error;
		}
#line 73 "../src/Application.vala"
		_tmp8_ = tmp;
#line 73 "../src/Application.vala"
		_tmp8__length1 = tmp_length1;
#line 73 "../src/Application.vala"
		unclaimed_args = _tmp8__length1 - 1;
#line 332 "Application.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* e = NULL;
		GError* _tmp9_;
		const gchar* _tmp10_;
		gchar* _tmp11_;
		gchar* _tmp12_;
		gchar* _tmp13_;
		gchar* _tmp14_;
#line 70 "../src/Application.vala"
		e = _inner_error0_;
#line 70 "../src/Application.vala"
		_inner_error0_ = NULL;
#line 75 "../src/Application.vala"
		_tmp9_ = e;
#line 75 "../src/Application.vala"
		_tmp10_ = _tmp9_->message;
#line 75 "../src/Application.vala"
		_tmp11_ = g_strconcat ("ERROR: ", _tmp10_, NULL);
#line 75 "../src/Application.vala"
		_tmp12_ = _tmp11_;
#line 75 "../src/Application.vala"
		_tmp13_ = g_strconcat (_tmp12_, "\n", NULL);
#line 75 "../src/Application.vala"
		_tmp14_ = _tmp13_;
#line 75 "../src/Application.vala"
		g_warning ("Application.vala:75: %s", _tmp14_);
#line 75 "../src/Application.vala"
		_g_free0 (_tmp14_);
#line 75 "../src/Application.vala"
		_g_free0 (_tmp12_);
#line 76 "../src/Application.vala"
		result = 0;
#line 76 "../src/Application.vala"
		_g_error_free0 (e);
#line 76 "../src/Application.vala"
		_g_option_context_free0 (context);
#line 76 "../src/Application.vala"
		args = (_vala_array_free (args, args_length1, (GDestroyNotify) g_free), NULL);
#line 76 "../src/Application.vala"
		return result;
#line 376 "Application.c"
	}
	__finally0:
#line 70 "../src/Application.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 381 "Application.c"
		gint _tmp15_ = -1;
#line 70 "../src/Application.vala"
		_g_option_context_free0 (context);
#line 70 "../src/Application.vala"
		args = (_vala_array_free (args, args_length1, (GDestroyNotify) g_free), NULL);
#line 70 "../src/Application.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 70 "../src/Application.vala"
		g_clear_error (&_inner_error0_);
#line 70 "../src/Application.vala"
		return _tmp15_;
#line 393 "Application.c"
	}
#line 79 "../src/Application.vala"
	if (quilter_application_print_ver) {
#line 397 "Application.c"
		FILE* _tmp16_;
#line 80 "../src/Application.vala"
		_tmp16_ = stdout;
#line 80 "../src/Application.vala"
		fprintf (_tmp16_, "Quilter - Copyright 2017-2021 Lains\n");
#line 81 "../src/Application.vala"
		result = 0;
#line 81 "../src/Application.vala"
		_g_option_context_free0 (context);
#line 81 "../src/Application.vala"
		args = (_vala_array_free (args, args_length1, (GDestroyNotify) g_free), NULL);
#line 81 "../src/Application.vala"
		return result;
#line 411 "Application.c"
	} else {
#line 83 "../src/Application.vala"
		quilter_application_new_win (self);
#line 415 "Application.c"
	}
#line 87 "../src/Application.vala"
	_tmp17_ = quilter_application__cwd;
#line 87 "../src/Application.vala"
	g_chdir (_tmp17_);
#line 89 "../src/Application.vala"
	if (unclaimed_args > 0) {
#line 423 "Application.c"
		GFile** files = NULL;
		GFile** _tmp18_;
		gint files_length1;
		gint _files_size_;
		gchar** _tmp19_;
		gint _tmp19__length1;
		GFile** _tmp90_;
		gint _tmp90__length1;
#line 90 "../src/Application.vala"
		_tmp18_ = g_new0 (GFile*, unclaimed_args + 1);
#line 90 "../src/Application.vala"
		files = _tmp18_;
#line 90 "../src/Application.vala"
		files_length1 = unclaimed_args;
#line 90 "../src/Application.vala"
		_files_size_ = files_length1;
#line 91 "../src/Application.vala"
		files_length1 = 0;
#line 93 "../src/Application.vala"
		_tmp19_ = args;
#line 93 "../src/Application.vala"
		_tmp19__length1 = args_length1;
#line 446 "Application.c"
		{
			gchar** arg_collection = NULL;
			gint arg_collection_length1 = 0;
			gint _arg_collection_size_ = 0;
			gint arg_it = 0;
#line 93 "../src/Application.vala"
			arg_collection = _tmp19_ + 1;
#line 93 "../src/Application.vala"
			arg_collection_length1 = (unclaimed_args + 1) - 1;
#line 93 "../src/Application.vala"
			for (arg_it = 0; arg_it < arg_collection_length1; arg_it = arg_it + 1) {
#line 458 "Application.c"
				gchar* _tmp20_;
				gchar* arg = NULL;
#line 93 "../src/Application.vala"
				_tmp20_ = g_strdup (arg_collection[arg_it]);
#line 93 "../src/Application.vala"
				arg = _tmp20_;
#line 465 "Application.c"
				{
					gchar* msg = NULL;
					gchar* _tmp21_;
					const gchar* _tmp79_;
					gint _tmp80_;
					gint _tmp81_;
#line 96 "../src/Application.vala"
					_tmp21_ = g_strdup ("");
#line 96 "../src/Application.vala"
					msg = _tmp21_;
#line 476 "Application.c"
					{
						GFile* file = NULL;
						const gchar* _tmp22_;
						GFile* _tmp23_;
						GFile* _tmp24_;
						GFileInfo* info = NULL;
						GFile* _tmp54_;
						GFileInfo* _tmp55_;
						gchar* err_msg = NULL;
						gchar* _tmp56_;
						gchar* reason = NULL;
						gchar* _tmp57_;
						GFileInfo* _tmp58_;
						const gchar* _tmp65_;
						gint _tmp66_;
						gint _tmp67_;
#line 98 "../src/Application.vala"
						_tmp22_ = arg;
#line 98 "../src/Application.vala"
						_tmp23_ = g_file_new_for_commandline_arg (_tmp22_);
#line 98 "../src/Application.vala"
						file = _tmp23_;
#line 100 "../src/Application.vala"
						_tmp24_ = file;
#line 100 "../src/Application.vala"
						if (!g_file_query_exists (_tmp24_, NULL)) {
#line 503 "Application.c"
							{
								GFile* _tmp25_;
								gchar* _tmp26_;
								gchar* _tmp27_;
#line 102 "../src/Application.vala"
								_tmp25_ = file;
#line 102 "../src/Application.vala"
								_tmp26_ = g_file_get_path (_tmp25_);
#line 102 "../src/Application.vala"
								_tmp27_ = _tmp26_;
#line 102 "../src/Application.vala"
								g_file_set_contents (_tmp27_, "", (gssize) -1, &_inner_error0_);
#line 102 "../src/Application.vala"
								_g_free0 (_tmp27_);
#line 102 "../src/Application.vala"
								if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 520 "Application.c"
									goto __catch2_g_error;
								}
							}
							goto __finally2;
							__catch2_g_error:
							{
								GError* e = NULL;
								gchar* reason = NULL;
								gchar* _tmp28_;
								GError* _tmp29_;
								const gchar* _tmp40_;
								gint _tmp41_;
								gint _tmp42_;
								GError* _tmp50_;
								GError* _tmp51_;
								const gchar* _tmp52_;
								GError* _tmp53_;
#line 101 "../src/Application.vala"
								e = _inner_error0_;
#line 101 "../src/Application.vala"
								_inner_error0_ = NULL;
#line 104 "../src/Application.vala"
								_tmp28_ = g_strdup ("");
#line 104 "../src/Application.vala"
								reason = _tmp28_;
#line 106 "../src/Application.vala"
								_tmp29_ = e;
#line 106 "../src/Application.vala"
								if (g_error_matches (_tmp29_, G_FILE_ERROR, G_FILE_ERROR_ACCES)) {
#line 550 "Application.c"
									gchar* _tmp30_;
#line 107 "../src/Application.vala"
									_tmp30_ = g_strdup ("Does not have the necessary permissions.");
#line 107 "../src/Application.vala"
									_g_free0 (reason);
#line 107 "../src/Application.vala"
									reason = _tmp30_;
#line 558 "Application.c"
								} else {
									GError* _tmp31_;
#line 108 "../src/Application.vala"
									_tmp31_ = e;
#line 108 "../src/Application.vala"
									if (g_error_matches (_tmp31_, G_FILE_ERROR, G_FILE_ERROR_NOENT)) {
#line 565 "Application.c"
										gchar* _tmp32_;
#line 109 "../src/Application.vala"
										_tmp32_ = g_strdup ("File path provided is not valid.");
#line 109 "../src/Application.vala"
										_g_free0 (reason);
#line 109 "../src/Application.vala"
										reason = _tmp32_;
#line 573 "Application.c"
									} else {
										GError* _tmp33_;
#line 110 "../src/Application.vala"
										_tmp33_ = e;
#line 110 "../src/Application.vala"
										if (g_error_matches (_tmp33_, G_FILE_ERROR, G_FILE_ERROR_ROFS)) {
#line 580 "Application.c"
											gchar* _tmp34_;
#line 111 "../src/Application.vala"
											_tmp34_ = g_strdup ("The location is read-only.");
#line 111 "../src/Application.vala"
											_g_free0 (reason);
#line 111 "../src/Application.vala"
											reason = _tmp34_;
#line 588 "Application.c"
										} else {
											GError* _tmp35_;
#line 112 "../src/Application.vala"
											_tmp35_ = e;
#line 112 "../src/Application.vala"
											if (g_error_matches (_tmp35_, G_FILE_ERROR, G_FILE_ERROR_NOTDIR)) {
#line 595 "Application.c"
												gchar* _tmp36_;
#line 113 "../src/Application.vala"
												_tmp36_ = g_strdup ("The parent directory doesn't exist.");
#line 113 "../src/Application.vala"
												_g_free0 (reason);
#line 113 "../src/Application.vala"
												reason = _tmp36_;
#line 603 "Application.c"
											} else {
												GError* _tmp37_;
												const gchar* _tmp38_;
												gchar* _tmp39_;
#line 116 "../src/Application.vala"
												_tmp37_ = e;
#line 116 "../src/Application.vala"
												_tmp38_ = _tmp37_->message;
#line 116 "../src/Application.vala"
												_tmp39_ = g_strdup (_tmp38_);
#line 116 "../src/Application.vala"
												_g_free0 (msg);
#line 116 "../src/Application.vala"
												msg = _tmp39_;
#line 618 "Application.c"
											}
										}
									}
								}
#line 119 "../src/Application.vala"
								_tmp40_ = reason;
#line 119 "../src/Application.vala"
								_tmp41_ = strlen (_tmp40_);
#line 119 "../src/Application.vala"
								_tmp42_ = _tmp41_;
#line 119 "../src/Application.vala"
								if (_tmp42_ > 0) {
#line 631 "Application.c"
									GFile* _tmp43_;
									gchar* _tmp44_;
									gchar* _tmp45_;
									gchar* _tmp46_;
									gchar* _tmp47_;
									const gchar* _tmp48_;
									gchar* _tmp49_;
#line 120 "../src/Application.vala"
									_tmp43_ = file;
#line 120 "../src/Application.vala"
									_tmp44_ = g_file_get_path (_tmp43_);
#line 120 "../src/Application.vala"
									_tmp45_ = _tmp44_;
#line 120 "../src/Application.vala"
									_tmp46_ = g_strdup_printf ("<b>%s</b>", _tmp45_);
#line 120 "../src/Application.vala"
									_tmp47_ = _tmp46_;
#line 120 "../src/Application.vala"
									_tmp48_ = reason;
#line 120 "../src/Application.vala"
									_tmp49_ = g_strdup_printf ("File \"%s\" cannot be created.\n%s", _tmp47_, _tmp48_);
#line 120 "../src/Application.vala"
									_g_free0 (msg);
#line 120 "../src/Application.vala"
									msg = _tmp49_;
#line 120 "../src/Application.vala"
									_g_free0 (_tmp47_);
#line 120 "../src/Application.vala"
									_g_free0 (_tmp45_);
#line 661 "Application.c"
								}
#line 125 "../src/Application.vala"
								_tmp50_ = e;
#line 125 "../src/Application.vala"
								_tmp51_ = e;
#line 125 "../src/Application.vala"
								_tmp52_ = msg;
#line 125 "../src/Application.vala"
								_tmp53_ = g_error_new (_tmp50_->domain, _tmp51_->code, "%s", _tmp52_);
#line 125 "../src/Application.vala"
								_inner_error0_ = _tmp53_;
#line 125 "../src/Application.vala"
								_g_free0 (reason);
#line 125 "../src/Application.vala"
								_g_error_free0 (e);
#line 677 "Application.c"
								goto __finally2;
							}
							__finally2:
#line 101 "../src/Application.vala"
							if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 101 "../src/Application.vala"
								_g_object_unref0 (file);
#line 685 "Application.c"
								goto __catch1_g_error;
							}
						}
#line 129 "../src/Application.vala"
						_tmp54_ = file;
#line 129 "../src/Application.vala"
						_tmp55_ = g_file_query_info (_tmp54_, "standard::*", G_FILE_QUERY_INFO_NONE, NULL, &_inner_error0_);
#line 129 "../src/Application.vala"
						info = _tmp55_;
#line 129 "../src/Application.vala"
						if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 129 "../src/Application.vala"
							_g_object_unref0 (file);
#line 699 "Application.c"
							goto __catch1_g_error;
						}
#line 130 "../src/Application.vala"
						_tmp56_ = g_strdup ("File \"%s\" cannot be opened.\n%s");
#line 130 "../src/Application.vala"
						err_msg = _tmp56_;
#line 131 "../src/Application.vala"
						_tmp57_ = g_strdup ("");
#line 131 "../src/Application.vala"
						reason = _tmp57_;
#line 133 "../src/Application.vala"
						_tmp58_ = info;
#line 133 "../src/Application.vala"
						switch (g_file_info_get_file_type (_tmp58_)) {
#line 133 "../src/Application.vala"
							case G_FILE_TYPE_REGULAR:
#line 133 "../src/Application.vala"
							case G_FILE_TYPE_SYMBOLIC_LINK:
#line 718 "Application.c"
							{
								GFile* _tmp59_;
								GFile* _tmp60_;
#line 136 "../src/Application.vala"
								_tmp59_ = file;
#line 136 "../src/Application.vala"
								_tmp60_ = _g_object_ref0 (_tmp59_);
#line 136 "../src/Application.vala"
								_vala_array_add1 (&files, &files_length1, &_files_size_, _tmp60_);
#line 137 "../src/Application.vala"
								break;
#line 730 "Application.c"
							}
#line 133 "../src/Application.vala"
							case G_FILE_TYPE_MOUNTABLE:
#line 734 "Application.c"
							{
								gchar* _tmp61_;
#line 139 "../src/Application.vala"
								_tmp61_ = g_strdup ("It is a mountable location.");
#line 139 "../src/Application.vala"
								_g_free0 (reason);
#line 139 "../src/Application.vala"
								reason = _tmp61_;
#line 140 "../src/Application.vala"
								break;
#line 745 "Application.c"
							}
#line 133 "../src/Application.vala"
							case G_FILE_TYPE_DIRECTORY:
#line 749 "Application.c"
							{
								gchar* _tmp62_;
#line 142 "../src/Application.vala"
								_tmp62_ = g_strdup ("It is a directory.");
#line 142 "../src/Application.vala"
								_g_free0 (reason);
#line 142 "../src/Application.vala"
								reason = _tmp62_;
#line 143 "../src/Application.vala"
								break;
#line 760 "Application.c"
							}
#line 133 "../src/Application.vala"
							case G_FILE_TYPE_SPECIAL:
#line 764 "Application.c"
							{
								gchar* _tmp63_;
#line 145 "../src/Application.vala"
								_tmp63_ = g_strdup ("It is a \"special\" file such as a socket,\n" \
" fifo, block device, or character device.");
#line 145 "../src/Application.vala"
								_g_free0 (reason);
#line 145 "../src/Application.vala"
								reason = _tmp63_;
#line 146 "../src/Application.vala"
								break;
#line 775 "Application.c"
							}
							default:
							{
								gchar* _tmp64_;
#line 148 "../src/Application.vala"
								_tmp64_ = g_strdup ("It is an \"unknown\" file type.");
#line 148 "../src/Application.vala"
								_g_free0 (reason);
#line 148 "../src/Application.vala"
								reason = _tmp64_;
#line 149 "../src/Application.vala"
								break;
#line 788 "Application.c"
							}
						}
#line 152 "../src/Application.vala"
						_tmp65_ = reason;
#line 152 "../src/Application.vala"
						_tmp66_ = strlen (_tmp65_);
#line 152 "../src/Application.vala"
						_tmp67_ = _tmp66_;
#line 152 "../src/Application.vala"
						if (_tmp67_ > 0) {
#line 799 "Application.c"
							const gchar* _tmp68_;
							GFile* _tmp69_;
							gchar* _tmp70_;
							gchar* _tmp71_;
							gchar* _tmp72_;
							gchar* _tmp73_;
							const gchar* _tmp74_;
							gchar* _tmp75_;
#line 153 "../src/Application.vala"
							_tmp68_ = err_msg;
#line 153 "../src/Application.vala"
							_tmp69_ = file;
#line 153 "../src/Application.vala"
							_tmp70_ = g_file_get_path (_tmp69_);
#line 153 "../src/Application.vala"
							_tmp71_ = _tmp70_;
#line 153 "../src/Application.vala"
							_tmp72_ = g_strdup_printf ("<b>%s</b>", _tmp71_);
#line 153 "../src/Application.vala"
							_tmp73_ = _tmp72_;
#line 153 "../src/Application.vala"
							_tmp74_ = reason;
#line 153 "../src/Application.vala"
							_tmp75_ = g_strdup_printf (_tmp68_, _tmp73_, _tmp74_);
#line 153 "../src/Application.vala"
							_g_free0 (msg);
#line 153 "../src/Application.vala"
							msg = _tmp75_;
#line 153 "../src/Application.vala"
							_g_free0 (_tmp73_);
#line 153 "../src/Application.vala"
							_g_free0 (_tmp71_);
#line 832 "Application.c"
						}
#line 97 "../src/Application.vala"
						_g_free0 (reason);
#line 97 "../src/Application.vala"
						_g_free0 (err_msg);
#line 97 "../src/Application.vala"
						_g_object_unref0 (info);
#line 97 "../src/Application.vala"
						_g_object_unref0 (file);
#line 842 "Application.c"
					}
					goto __finally1;
					__catch1_g_error:
					{
						GError* e = NULL;
						GError* _tmp76_;
						const gchar* _tmp77_;
#line 97 "../src/Application.vala"
						e = _inner_error0_;
#line 97 "../src/Application.vala"
						_inner_error0_ = NULL;
#line 157 "../src/Application.vala"
						_tmp76_ = e;
#line 157 "../src/Application.vala"
						_tmp77_ = _tmp76_->message;
#line 157 "../src/Application.vala"
						g_warning ("Application.vala:157: %s", _tmp77_);
#line 97 "../src/Application.vala"
						_g_error_free0 (e);
#line 862 "Application.c"
					}
					__finally1:
#line 97 "../src/Application.vala"
					if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 867 "Application.c"
						gint _tmp78_ = -1;
#line 97 "../src/Application.vala"
						_g_free0 (msg);
#line 97 "../src/Application.vala"
						_g_free0 (arg);
#line 97 "../src/Application.vala"
						files = (_vala_array_free (files, files_length1, (GDestroyNotify) g_object_unref), NULL);
#line 97 "../src/Application.vala"
						_g_option_context_free0 (context);
#line 97 "../src/Application.vala"
						args = (_vala_array_free (args, args_length1, (GDestroyNotify) g_free), NULL);
#line 97 "../src/Application.vala"
						g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 97 "../src/Application.vala"
						g_clear_error (&_inner_error0_);
#line 97 "../src/Application.vala"
						return _tmp78_;
#line 885 "Application.c"
					}
#line 161 "../src/Application.vala"
					_tmp79_ = msg;
#line 161 "../src/Application.vala"
					_tmp80_ = strlen (_tmp79_);
#line 161 "../src/Application.vala"
					_tmp81_ = _tmp80_;
#line 161 "../src/Application.vala"
					if (_tmp81_ > 0) {
#line 895 "Application.c"
						GtkWindow* parent_win = NULL;
						QuilterMainWindow* _tmp82_;
						GtkWindow* _tmp83_;
						GtkMessageDialog* dialog = NULL;
						GtkWindow* _tmp84_;
						const gchar* _tmp85_;
						GtkMessageDialog* _tmp86_;
						GtkMessageDialog* _tmp87_;
						GtkMessageDialog* _tmp88_;
						GtkMessageDialog* _tmp89_;
#line 162 "../src/Application.vala"
						_tmp82_ = quilter_application_get_last_win (self);
#line 162 "../src/Application.vala"
						_tmp83_ = G_TYPE_CHECK_INSTANCE_TYPE (_tmp82_, gtk_window_get_type ()) ? ((GtkWindow*) _tmp82_) : NULL;
#line 162 "../src/Application.vala"
						if (_tmp83_ == NULL) {
#line 162 "../src/Application.vala"
							_g_object_unref0 (_tmp82_);
#line 914 "Application.c"
						}
#line 162 "../src/Application.vala"
						parent_win = _tmp83_;
#line 163 "../src/Application.vala"
						_tmp84_ = parent_win;
#line 163 "../src/Application.vala"
						_tmp85_ = msg;
#line 163 "../src/Application.vala"
						_tmp86_ = (GtkMessageDialog*) gtk_message_dialog_new_with_markup (_tmp84_, GTK_DIALOG_MODAL, GTK_MESSAGE_ERROR, GTK_BUTTONS_CLOSE, "%s", _tmp85_);
#line 163 "../src/Application.vala"
						g_object_ref_sink (_tmp86_);
#line 163 "../src/Application.vala"
						dialog = _tmp86_;
#line 168 "../src/Application.vala"
						_tmp87_ = dialog;
#line 168 "../src/Application.vala"
						gtk_dialog_run ((GtkDialog*) _tmp87_);
#line 169 "../src/Application.vala"
						_tmp88_ = dialog;
#line 169 "../src/Application.vala"
						gtk_widget_destroy ((GtkWidget*) _tmp88_);
#line 170 "../src/Application.vala"
						_tmp89_ = dialog;
#line 170 "../src/Application.vala"
						g_signal_emit_by_name ((GtkDialog*) _tmp89_, "close");
#line 161 "../src/Application.vala"
						_g_object_unref0 (dialog);
#line 161 "../src/Application.vala"
						_g_object_unref0 (parent_win);
#line 944 "Application.c"
					}
#line 93 "../src/Application.vala"
					_g_free0 (msg);
#line 93 "../src/Application.vala"
					_g_free0 (arg);
#line 950 "Application.c"
				}
			}
		}
#line 174 "../src/Application.vala"
		_tmp90_ = files;
#line 174 "../src/Application.vala"
		_tmp90__length1 = files_length1;
#line 174 "../src/Application.vala"
		if (_tmp90__length1 > 0) {
#line 960 "Application.c"
			QuilterMainWindow* _tmp91_;
			GFile** _tmp92_;
			gint _tmp92__length1;
#line 175 "../src/Application.vala"
			_tmp91_ = quilter_application_win;
#line 175 "../src/Application.vala"
			_tmp92_ = files;
#line 175 "../src/Application.vala"
			_tmp92__length1 = files_length1;
#line 175 "../src/Application.vala"
			quilter_services_file_manager_open_from_outside (_tmp91_, _tmp92_, (gint) _tmp92__length1, "");
#line 972 "Application.c"
		} else {
#line 177 "../src/Application.vala"
			quilter_application_open_view = FALSE;
#line 976 "Application.c"
		}
#line 89 "../src/Application.vala"
		files = (_vala_array_free (files, files_length1, (GDestroyNotify) g_object_unref), NULL);
#line 980 "Application.c"
	}
#line 181 "../src/Application.vala"
	result = 0;
#line 181 "../src/Application.vala"
	_g_option_context_free0 (context);
#line 181 "../src/Application.vala"
	args = (_vala_array_free (args, args_length1, (GDestroyNotify) g_free), NULL);
#line 181 "../src/Application.vala"
	return result;
#line 990 "Application.c"
}

QuilterMainWindow*
quilter_application_get_last_win (QuilterApplication* self)
{
	GList* wins = NULL;
	GList* _tmp0_;
	QuilterMainWindow* _tmp1_ = NULL;
	GList* _tmp2_;
	QuilterMainWindow* _tmp7_;
	QuilterMainWindow* result = NULL;
#line 184 "../src/Application.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 185 "../src/Application.vala"
	_tmp0_ = gtk_application_get_windows ((GtkApplication*) self);
#line 185 "../src/Application.vala"
	wins = _tmp0_;
#line 186 "../src/Application.vala"
	_tmp2_ = wins;
#line 186 "../src/Application.vala"
	if (g_list_length (_tmp2_) > ((guint) 0)) {
#line 1012 "Application.c"
		GList* _tmp3_;
		GList* _tmp4_;
		gconstpointer _tmp5_;
		GtkWindow* _tmp6_;
#line 186 "../src/Application.vala"
		_tmp3_ = wins;
#line 186 "../src/Application.vala"
		_tmp4_ = g_list_last (_tmp3_);
#line 186 "../src/Application.vala"
		_tmp5_ = _tmp4_->data;
#line 186 "../src/Application.vala"
		_tmp6_ = (GtkWindow*) _tmp5_;
#line 186 "../src/Application.vala"
		_tmp1_ = QUILTER_IS_MAIN_WINDOW (_tmp6_) ? ((QuilterMainWindow*) _tmp6_) : NULL;
#line 1027 "Application.c"
	} else {
#line 186 "../src/Application.vala"
		_tmp1_ = NULL;
#line 1031 "Application.c"
	}
#line 186 "../src/Application.vala"
	_tmp7_ = _g_object_ref0 (_tmp1_);
#line 186 "../src/Application.vala"
	result = _tmp7_;
#line 186 "../src/Application.vala"
	return result;
#line 1039 "Application.c"
}

QuilterApplication*
quilter_application_construct (GType object_type)
{
	QuilterApplication * self = NULL;
#line 21 "../src/Application.vala"
	self = (QuilterApplication*) g_object_new (object_type, NULL);
#line 21 "../src/Application.vala"
	return self;
#line 1050 "Application.c"
}

QuilterApplication*
quilter_application_new (void)
{
#line 21 "../src/Application.vala"
	return quilter_application_construct (QUILTER_TYPE_APPLICATION);
#line 1058 "Application.c"
}

static GObject *
quilter_application_constructor (GType type,
                                 guint n_construct_properties,
                                 GObjectConstructParam * construct_properties)
{
	GObject * obj;
	GObjectClass * parent_class;
	QuilterApplication * self;
	GApplicationFlags _tmp0_;
	GApplicationFlags _tmp1_;
	GApplicationFlags _tmp2_;
	GApplicationFlags _tmp3_;
	gchar* _tmp4_;
	gchar** _tmp5_;
#line 34 "../src/Application.vala"
	parent_class = G_OBJECT_CLASS (quilter_application_parent_class);
#line 34 "../src/Application.vala"
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
#line 34 "../src/Application.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, QUILTER_TYPE_APPLICATION, QuilterApplication);
#line 35 "../src/Application.vala"
	_tmp0_ = g_application_get_flags ((GApplication*) self);
#line 35 "../src/Application.vala"
	_tmp1_ = _tmp0_;
#line 35 "../src/Application.vala"
	g_application_set_flags ((GApplication*) self, _tmp1_ | G_APPLICATION_HANDLES_COMMAND_LINE);
#line 36 "../src/Application.vala"
	_tmp2_ = g_application_get_flags ((GApplication*) self);
#line 36 "../src/Application.vala"
	_tmp3_ = _tmp2_;
#line 36 "../src/Application.vala"
	g_application_set_flags ((GApplication*) self, _tmp3_ | G_APPLICATION_HANDLES_OPEN);
#line 37 "../src/Application.vala"
	g_application_set_application_id ((GApplication*) self, "io.github.lainsce.Quilter");
#line 39 "../src/Application.vala"
	_tmp4_ = g_strdup ("text/markdown");
#line 39 "../src/Application.vala"
	_tmp5_ = g_new0 (gchar*, 1 + 1);
#line 39 "../src/Application.vala"
	_tmp5_[0] = _tmp4_;
#line 39 "../src/Application.vala"
	quilter_application_supported_mimetypes = (_vala_array_free (quilter_application_supported_mimetypes, quilter_application_supported_mimetypes_length1, (GDestroyNotify) g_free), NULL);
#line 39 "../src/Application.vala"
	quilter_application_supported_mimetypes = _tmp5_;
#line 39 "../src/Application.vala"
	quilter_application_supported_mimetypes_length1 = 1;
#line 34 "../src/Application.vala"
	return obj;
#line 1109 "Application.c"
}

static void
quilter_application_class_init (QuilterApplicationClass * klass,
                                gpointer klass_data)
{
	GSettings* _tmp0_;
#line 21 "../src/Application.vala"
	quilter_application_parent_class = g_type_class_peek_parent (klass);
#line 21 "../src/Application.vala"
	((GApplicationClass *) klass)->activate = (void (*) (GApplication*)) quilter_application_real_activate;
#line 21 "../src/Application.vala"
	((GApplicationClass *) klass)->command_line = (gint (*) (GApplication*, GApplicationCommandLine*)) quilter_application_real_command_line;
#line 21 "../src/Application.vala"
	G_OBJECT_CLASS (klass)->constructor = quilter_application_constructor;
#line 21 "../src/Application.vala"
	G_OBJECT_CLASS (klass)->finalize = quilter_application_finalize;
#line 31 "../src/Application.vala"
	_tmp0_ = g_settings_new ("io.github.lainsce.Quilter");
#line 31 "../src/Application.vala"
	_g_object_unref0 (quilter_application_gsettings);
#line 31 "../src/Application.vala"
	quilter_application_gsettings = _tmp0_;
#line 1133 "Application.c"
}

static void
quilter_application_instance_init (QuilterApplication * self,
                                   gpointer klass)
{
}

static void
quilter_application_finalize (GObject * obj)
{
	QuilterApplication * self;
#line 21 "../src/Application.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, QUILTER_TYPE_APPLICATION, QuilterApplication);
#line 25 "../src/Application.vala"
	_g_object_unref0 (self->toolbar);
#line 21 "../src/Application.vala"
	G_OBJECT_CLASS (quilter_application_parent_class)->finalize (obj);
#line 1152 "Application.c"
}

static GType
quilter_application_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (QuilterApplicationClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) quilter_application_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (QuilterApplication), 0, (GInstanceInitFunc) quilter_application_instance_init, NULL };
	GType quilter_application_type_id;
	quilter_application_type_id = g_type_register_static (gtk_application_get_type (), "QuilterApplication", &g_define_type_info, 0);
	return quilter_application_type_id;
}

GType
quilter_application_get_type (void)
{
	static volatile gsize quilter_application_type_id__volatile = 0;
	if (g_once_init_enter (&quilter_application_type_id__volatile)) {
		GType quilter_application_type_id;
		quilter_application_type_id = quilter_application_get_type_once ();
		g_once_init_leave (&quilter_application_type_id__volatile, quilter_application_type_id);
	}
	return quilter_application_type_id__volatile;
}

static void
_vala_array_destroy (gpointer array,
                     gint array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		gint i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}

static void
_vala_array_free (gpointer array,
                  gint array_length,
                  GDestroyNotify destroy_func)
{
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}

