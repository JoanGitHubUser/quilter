/* FileManager.c generated by valac 0.50.2, the Vala compiler
 * generated from FileManager.vala, do not modify */

/*
 * Copyright (C) 2017-2021 Lains
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 */

#include <gio/gio.h>
#include <handy.h>
#include <glib-object.h>
#include <gtksourceview/gtksource.h>
#include <stdlib.h>
#include <string.h>
#include <glib.h>
#include <glib/gstdio.h>
#include <gtk/gtk.h>
#include <webkit2/webkit2.h>
#include <float.h>
#include <math.h>
#include <glib/gi18n-lib.h>

#define QUILTER_TYPE_MAIN_WINDOW (quilter_main_window_get_type ())
#define QUILTER_MAIN_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), QUILTER_TYPE_MAIN_WINDOW, QuilterMainWindow))
#define QUILTER_MAIN_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), QUILTER_TYPE_MAIN_WINDOW, QuilterMainWindowClass))
#define QUILTER_IS_MAIN_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), QUILTER_TYPE_MAIN_WINDOW))
#define QUILTER_IS_MAIN_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), QUILTER_TYPE_MAIN_WINDOW))
#define QUILTER_MAIN_WINDOW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), QUILTER_TYPE_MAIN_WINDOW, QuilterMainWindowClass))

typedef struct _QuilterMainWindow QuilterMainWindow;
typedef struct _QuilterMainWindowClass QuilterMainWindowClass;

#define QUILTER_WIDGETS_TYPE_EDIT_VIEW (quilter_widgets_edit_view_get_type ())
#define QUILTER_WIDGETS_EDIT_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), QUILTER_WIDGETS_TYPE_EDIT_VIEW, QuilterWidgetsEditView))
#define QUILTER_WIDGETS_EDIT_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), QUILTER_WIDGETS_TYPE_EDIT_VIEW, QuilterWidgetsEditViewClass))
#define QUILTER_WIDGETS_IS_EDIT_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), QUILTER_WIDGETS_TYPE_EDIT_VIEW))
#define QUILTER_WIDGETS_IS_EDIT_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), QUILTER_WIDGETS_TYPE_EDIT_VIEW))
#define QUILTER_WIDGETS_EDIT_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), QUILTER_WIDGETS_TYPE_EDIT_VIEW, QuilterWidgetsEditViewClass))

typedef struct _QuilterWidgetsEditView QuilterWidgetsEditView;
typedef struct _QuilterWidgetsEditViewClass QuilterWidgetsEditViewClass;
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
#define _g_time_zone_unref0(var) ((var == NULL) ? NULL : (var = (g_time_zone_unref (var), NULL)))
#define _g_date_time_unref0(var) ((var == NULL) ? NULL : (var = (g_date_time_unref (var), NULL)))
typedef struct _QuilterMainWindowPrivate QuilterMainWindowPrivate;

#define QUILTER_WIDGETS_TYPE_HEADERBAR (quilter_widgets_headerbar_get_type ())
#define QUILTER_WIDGETS_HEADERBAR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), QUILTER_WIDGETS_TYPE_HEADERBAR, QuilterWidgetsHeaderbar))
#define QUILTER_WIDGETS_HEADERBAR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), QUILTER_WIDGETS_TYPE_HEADERBAR, QuilterWidgetsHeaderbarClass))
#define QUILTER_WIDGETS_IS_HEADERBAR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), QUILTER_WIDGETS_TYPE_HEADERBAR))
#define QUILTER_WIDGETS_IS_HEADERBAR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), QUILTER_WIDGETS_TYPE_HEADERBAR))
#define QUILTER_WIDGETS_HEADERBAR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), QUILTER_WIDGETS_TYPE_HEADERBAR, QuilterWidgetsHeaderbarClass))

typedef struct _QuilterWidgetsHeaderbar QuilterWidgetsHeaderbar;
typedef struct _QuilterWidgetsHeaderbarClass QuilterWidgetsHeaderbarClass;

#define QUILTER_WIDGETS_TYPE_PREVIEW (quilter_widgets_preview_get_type ())
#define QUILTER_WIDGETS_PREVIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), QUILTER_WIDGETS_TYPE_PREVIEW, QuilterWidgetsPreview))
#define QUILTER_WIDGETS_PREVIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), QUILTER_WIDGETS_TYPE_PREVIEW, QuilterWidgetsPreviewClass))
#define QUILTER_WIDGETS_IS_PREVIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), QUILTER_WIDGETS_TYPE_PREVIEW))
#define QUILTER_WIDGETS_IS_PREVIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), QUILTER_WIDGETS_TYPE_PREVIEW))
#define QUILTER_WIDGETS_PREVIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), QUILTER_WIDGETS_TYPE_PREVIEW, QuilterWidgetsPreviewClass))

typedef struct _QuilterWidgetsPreview QuilterWidgetsPreview;
typedef struct _QuilterWidgetsPreviewClass QuilterWidgetsPreviewClass;

#define QUILTER_WIDGETS_TYPE_SEARCH_BAR (quilter_widgets_search_bar_get_type ())
#define QUILTER_WIDGETS_SEARCH_BAR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), QUILTER_WIDGETS_TYPE_SEARCH_BAR, QuilterWidgetsSearchBar))
#define QUILTER_WIDGETS_SEARCH_BAR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), QUILTER_WIDGETS_TYPE_SEARCH_BAR, QuilterWidgetsSearchBarClass))
#define QUILTER_WIDGETS_IS_SEARCH_BAR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), QUILTER_WIDGETS_TYPE_SEARCH_BAR))
#define QUILTER_WIDGETS_IS_SEARCH_BAR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), QUILTER_WIDGETS_TYPE_SEARCH_BAR))
#define QUILTER_WIDGETS_SEARCH_BAR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), QUILTER_WIDGETS_TYPE_SEARCH_BAR, QuilterWidgetsSearchBarClass))

typedef struct _QuilterWidgetsSearchBar QuilterWidgetsSearchBar;
typedef struct _QuilterWidgetsSearchBarClass QuilterWidgetsSearchBarClass;

#define QUILTER_WIDGETS_TYPE_SIDE_BAR (quilter_widgets_side_bar_get_type ())
#define QUILTER_WIDGETS_SIDE_BAR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), QUILTER_WIDGETS_TYPE_SIDE_BAR, QuilterWidgetsSideBar))
#define QUILTER_WIDGETS_SIDE_BAR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), QUILTER_WIDGETS_TYPE_SIDE_BAR, QuilterWidgetsSideBarClass))
#define QUILTER_WIDGETS_IS_SIDE_BAR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), QUILTER_WIDGETS_TYPE_SIDE_BAR))
#define QUILTER_WIDGETS_IS_SIDE_BAR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), QUILTER_WIDGETS_TYPE_SIDE_BAR))
#define QUILTER_WIDGETS_SIDE_BAR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), QUILTER_WIDGETS_TYPE_SIDE_BAR, QuilterWidgetsSideBarClass))

typedef struct _QuilterWidgetsSideBar QuilterWidgetsSideBar;
typedef struct _QuilterWidgetsSideBarClass QuilterWidgetsSideBarClass;

#define QUILTER_WIDGETS_TYPE_STATUS_BAR (quilter_widgets_status_bar_get_type ())
#define QUILTER_WIDGETS_STATUS_BAR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), QUILTER_WIDGETS_TYPE_STATUS_BAR, QuilterWidgetsStatusBar))
#define QUILTER_WIDGETS_STATUS_BAR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), QUILTER_WIDGETS_TYPE_STATUS_BAR, QuilterWidgetsStatusBarClass))
#define QUILTER_WIDGETS_IS_STATUS_BAR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), QUILTER_WIDGETS_TYPE_STATUS_BAR))
#define QUILTER_WIDGETS_IS_STATUS_BAR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), QUILTER_WIDGETS_TYPE_STATUS_BAR))
#define QUILTER_WIDGETS_STATUS_BAR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), QUILTER_WIDGETS_TYPE_STATUS_BAR, QuilterWidgetsStatusBarClass))

typedef struct _QuilterWidgetsStatusBar QuilterWidgetsStatusBar;
typedef struct _QuilterWidgetsStatusBarClass QuilterWidgetsStatusBarClass;

#define QUILTER_WIDGETS_TYPE_SIDE_BAR_BOX (quilter_widgets_side_bar_box_get_type ())
#define QUILTER_WIDGETS_SIDE_BAR_BOX(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), QUILTER_WIDGETS_TYPE_SIDE_BAR_BOX, QuilterWidgetsSideBarBox))
#define QUILTER_WIDGETS_SIDE_BAR_BOX_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), QUILTER_WIDGETS_TYPE_SIDE_BAR_BOX, QuilterWidgetsSideBarBoxClass))
#define QUILTER_WIDGETS_IS_SIDE_BAR_BOX(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), QUILTER_WIDGETS_TYPE_SIDE_BAR_BOX))
#define QUILTER_WIDGETS_IS_SIDE_BAR_BOX_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), QUILTER_WIDGETS_TYPE_SIDE_BAR_BOX))
#define QUILTER_WIDGETS_SIDE_BAR_BOX_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), QUILTER_WIDGETS_TYPE_SIDE_BAR_BOX, QuilterWidgetsSideBarBoxClass))

typedef struct _QuilterWidgetsSideBarBox QuilterWidgetsSideBarBox;
typedef struct _QuilterWidgetsSideBarBoxClass QuilterWidgetsSideBarBoxClass;
typedef struct _QuilterWidgetsEditViewPrivate QuilterWidgetsEditViewPrivate;

#define QUILTER_SERVICES_TYPE_POS_FILES (quilter_services_pos_files_get_type ())
#define QUILTER_SERVICES_POS_FILES(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), QUILTER_SERVICES_TYPE_POS_FILES, QuilterServicesPOSFiles))
#define QUILTER_SERVICES_POS_FILES_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), QUILTER_SERVICES_TYPE_POS_FILES, QuilterServicesPOSFilesClass))
#define QUILTER_SERVICES_IS_POS_FILES(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), QUILTER_SERVICES_TYPE_POS_FILES))
#define QUILTER_SERVICES_IS_POS_FILES_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), QUILTER_SERVICES_TYPE_POS_FILES))
#define QUILTER_SERVICES_POS_FILES_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), QUILTER_SERVICES_TYPE_POS_FILES, QuilterServicesPOSFilesClass))

typedef struct _QuilterServicesPOSFiles QuilterServicesPOSFiles;
typedef struct _QuilterServicesPOSFilesClass QuilterServicesPOSFilesClass;

struct _QuilterMainWindow {
	HdyApplicationWindow parent_instance;
	QuilterMainWindowPrivate * priv;
	GtkAdjustment* eadj;
	GtkBox* box;
	GtkBox* main_leaf;
	GtkOverlay* overlay_editor;
	GtkButton* focus_overlay_button;
	HdyLeaflet* grid;
	HdyLeaflet* header;
	HdyTitleBar* window_header;
	HdyHeaderBar* welcome_titlebar;
	GtkGrid* main_pane;
	GtkGrid* welcome_view;
	GtkMenuButton* set_font_menu;
	GtkPaned* paned;
	GtkRevealer* titlebar_revealer;
	GtkRevealer* overlay_button_revealer;
	GtkScrolledWindow* edit_view;
	GtkStack* main_stack;
	GtkStack* stack;
	GtkStack* titlebar_stack;
	GtkStack* win_stack;
	GtkSeparator* separator;
	GtkSeparator* separator2;
	QuilterWidgetsEditView* edit_view_content;
	QuilterWidgetsHeaderbar* titlebar;
	QuilterWidgetsPreview* preview_view_content;
	QuilterWidgetsSearchBar* searchbar;
	QuilterWidgetsSideBar* sidebar;
	QuilterWidgetsStatusBar* statusbar;
};

struct _QuilterMainWindowClass {
	HdyApplicationWindowClass parent_class;
};

struct _QuilterWidgetsEditView {
	GtkSourceView parent_instance;
	QuilterWidgetsEditViewPrivate * priv;
	GFile* file;
	GtkSourceSearchContext* search_context;
	GtkSourceStyle* srcstyle;
	GtkTextTag* adjfont;
	GtkTextTag* adverbfont;
	GtkTextTag* conjfont;
	GtkTextTag* verbfont;
	GtkTextTag* error_tag;
	QuilterMainWindow* window;
	QuilterServicesPOSFiles* pos;
	gdouble cursor_position;
	GtkSourceBuffer* buffer;
	gchar* scroll_text;
};

struct _QuilterWidgetsEditViewClass {
	GtkSourceViewClass parent_class;
};

extern GFile* quilter_services_file_manager_tmp_file;
GFile* quilter_services_file_manager_tmp_file = NULL;
extern GFile* quilter_services_file_manager_file;
GFile* quilter_services_file_manager_file = NULL;
extern GFile* quilter_services_file_manager_cachedir;
GFile* quilter_services_file_manager_cachedir = NULL;
extern QuilterMainWindow* quilter_services_file_manager_win;
QuilterMainWindow* quilter_services_file_manager_win = NULL;
extern QuilterWidgetsEditView* quilter_services_file_manager_view;
QuilterWidgetsEditView* quilter_services_file_manager_view = NULL;
extern gchar** quilter_services_file_manager_files;
extern gint quilter_services_file_manager_files_length1;
gchar** quilter_services_file_manager_files = NULL;
gint quilter_services_file_manager_files_length1 = 0;
static gint _quilter_services_file_manager_files_size_ = 0;
extern gchar* quilter_services_file_manager_cache;
gchar* quilter_services_file_manager_cache = NULL;
extern GSettings* quilter_application_gsettings;

GType quilter_main_window_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (QuilterMainWindow, g_object_unref)
GType quilter_widgets_edit_view_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (QuilterWidgetsEditView, g_object_unref)
gchar* quilter_services_file_manager_get_cache_path (void);
gchar* quilter_services_file_manager_get_temp_document_path (void);
void quilter_services_file_manager_save_file (const gchar* path,
                                              const gchar* contents,
                                              GError** error);
gboolean quilter_services_file_manager_is_temp_file (const gchar* path);
gboolean quilter_services_file_manager_open_from_outside (QuilterMainWindow* win,
                                                          GFile** ofiles,
                                                          gint ofiles_length1,
                                                          const gchar* hint);
static void _vala_array_add15 (gchar** * array,
                        gint* length,
                        gint* size,
                        gchar* value);
GType quilter_widgets_headerbar_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (QuilterWidgetsHeaderbar, g_object_unref)
GType quilter_widgets_preview_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (QuilterWidgetsPreview, g_object_unref)
GType quilter_widgets_search_bar_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (QuilterWidgetsSearchBar, g_object_unref)
GType quilter_widgets_side_bar_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (QuilterWidgetsSideBar, g_object_unref)
GType quilter_widgets_status_bar_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (QuilterWidgetsStatusBar, g_object_unref)
GType quilter_widgets_side_bar_box_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (QuilterWidgetsSideBarBox, g_object_unref)
QuilterWidgetsSideBarBox* quilter_widgets_side_bar_add_file (QuilterWidgetsSideBar* self,
                                                             const gchar* file);
gpointer quilter_services_pos_files_ref (gpointer instance);
void quilter_services_pos_files_unref (gpointer instance);
GParamSpec* quilter_services_param_spec_pos_files (const gchar* name,
                                                   const gchar* nick,
                                                   const gchar* blurb,
                                                   GType object_type,
                                                   GParamFlags flags);
void quilter_services_value_set_pos_files (GValue* value,
                                           gpointer v_object);
void quilter_services_value_take_pos_files (GValue* value,
                                            gpointer v_object);
gpointer quilter_services_value_get_pos_files (const GValue* value);
GType quilter_services_pos_files_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (QuilterServicesPOSFiles, quilter_services_pos_files_unref)
void quilter_main_window_save_last_files (QuilterMainWindow* self);
gchar* quilter_services_file_manager_open (gchar* * contents);
GtkFileChooserNative* quilter_services_dialog_utils_create_file_chooser (const gchar* title,
                                                                         GtkFileChooserAction action);
void quilter_services_file_manager_save_as (const gchar* contents,
                                            gchar* * path,
                                            GError** error);

gchar*
quilter_services_file_manager_get_cache_path (void)
{
	const gchar* _tmp0_;
	const gchar* _tmp13_;
	gchar* _tmp14_;
	GError* _inner_error0_ = NULL;
	gchar* result = NULL;
#line 28 "../src/Services/FileManager.vala"
	_tmp0_ = quilter_services_file_manager_cache;
#line 28 "../src/Services/FileManager.vala"
	if (_tmp0_ == NULL) {
#line 277 "FileManager.c"
		const gchar* _tmp1_;
		gchar* _tmp2_;
		gchar* cachedirpath = NULL;
		const gchar* _tmp3_;
		gchar* _tmp4_;
		const gchar* _tmp5_;
		GFile* _tmp6_;
#line 29 "../src/Services/FileManager.vala"
		_tmp1_ = g_get_user_data_dir ();
#line 29 "../src/Services/FileManager.vala"
		_tmp2_ = g_build_filename (_tmp1_, "com.github.lainsce.quilter", NULL);
#line 29 "../src/Services/FileManager.vala"
		_g_free0 (quilter_services_file_manager_cache);
#line 29 "../src/Services/FileManager.vala"
		quilter_services_file_manager_cache = _tmp2_;
#line 30 "../src/Services/FileManager.vala"
		_tmp3_ = g_get_user_data_dir ();
#line 30 "../src/Services/FileManager.vala"
		_tmp4_ = g_build_filename (_tmp3_, "com.github.lainsce.quilter", NULL);
#line 30 "../src/Services/FileManager.vala"
		cachedirpath = _tmp4_;
#line 31 "../src/Services/FileManager.vala"
		_tmp5_ = cachedirpath;
#line 31 "../src/Services/FileManager.vala"
		_tmp6_ = g_file_new_for_path (_tmp5_);
#line 31 "../src/Services/FileManager.vala"
		_g_object_unref0 (quilter_services_file_manager_cachedir);
#line 31 "../src/Services/FileManager.vala"
		quilter_services_file_manager_cachedir = _tmp6_;
#line 307 "FileManager.c"
		{
			GFile* _tmp7_;
#line 33 "../src/Services/FileManager.vala"
			_tmp7_ = quilter_services_file_manager_cachedir;
#line 33 "../src/Services/FileManager.vala"
			if (!g_file_query_exists (_tmp7_, NULL)) {
#line 314 "FileManager.c"
				GFile* _tmp8_;
#line 34 "../src/Services/FileManager.vala"
				_tmp8_ = quilter_services_file_manager_cachedir;
#line 34 "../src/Services/FileManager.vala"
				g_file_make_directory_with_parents (_tmp8_, NULL, &_inner_error0_);
#line 34 "../src/Services/FileManager.vala"
				if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 322 "FileManager.c"
					goto __catch0_g_error;
				}
			}
		}
		goto __finally0;
		__catch0_g_error:
		{
			GError* e = NULL;
			GError* _tmp9_;
			const gchar* _tmp10_;
			gchar* _tmp11_;
			gchar* _tmp12_;
#line 32 "../src/Services/FileManager.vala"
			e = _inner_error0_;
#line 32 "../src/Services/FileManager.vala"
			_inner_error0_ = NULL;
#line 37 "../src/Services/FileManager.vala"
			_tmp9_ = e;
#line 37 "../src/Services/FileManager.vala"
			_tmp10_ = _tmp9_->message;
#line 37 "../src/Services/FileManager.vala"
			_tmp11_ = g_strconcat ("Error writing file: ", _tmp10_, NULL);
#line 37 "../src/Services/FileManager.vala"
			_tmp12_ = _tmp11_;
#line 37 "../src/Services/FileManager.vala"
			g_warning ("FileManager.vala:37: %s", _tmp12_);
#line 37 "../src/Services/FileManager.vala"
			_g_free0 (_tmp12_);
#line 32 "../src/Services/FileManager.vala"
			_g_error_free0 (e);
#line 353 "FileManager.c"
		}
		__finally0:
#line 32 "../src/Services/FileManager.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 32 "../src/Services/FileManager.vala"
			_g_free0 (cachedirpath);
#line 32 "../src/Services/FileManager.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 32 "../src/Services/FileManager.vala"
			g_clear_error (&_inner_error0_);
#line 32 "../src/Services/FileManager.vala"
			return NULL;
#line 366 "FileManager.c"
		}
#line 28 "../src/Services/FileManager.vala"
		_g_free0 (cachedirpath);
#line 370 "FileManager.c"
	}
#line 41 "../src/Services/FileManager.vala"
	_tmp13_ = quilter_services_file_manager_cache;
#line 41 "../src/Services/FileManager.vala"
	_tmp14_ = g_strdup (_tmp13_);
#line 41 "../src/Services/FileManager.vala"
	result = _tmp14_;
#line 41 "../src/Services/FileManager.vala"
	return result;
#line 380 "FileManager.c"
}

static gchar*
g_date_time_to_string (GDateTime* self)
{
	gchar* _tmp0_;
	gchar* result = NULL;
#line 3182 "glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, NULL);
#line 3183 "glib-2.0.vapi"
	_tmp0_ = g_date_time_format (self, "%FT%H:%M:%S%z");
#line 3183 "glib-2.0.vapi"
	result = _tmp0_;
#line 3183 "glib-2.0.vapi"
	return result;
#line 396 "FileManager.c"
}

gchar*
quilter_services_file_manager_get_temp_document_path (void)
{
	GDateTime* name = NULL;
	GTimeZone* _tmp0_;
	GTimeZone* _tmp1_;
	GDateTime* _tmp2_;
	GDateTime* _tmp3_;
	gchar* _tmp4_;
	gchar* _tmp5_;
	gchar* _tmp6_;
	gchar* _tmp7_;
	gchar* _tmp8_;
	gchar* _tmp9_;
	gchar* _tmp10_;
	gchar* _tmp11_;
	gchar* result = NULL;
#line 45 "../src/Services/FileManager.vala"
	_tmp0_ = g_time_zone_new_local ();
#line 45 "../src/Services/FileManager.vala"
	_tmp1_ = _tmp0_;
#line 45 "../src/Services/FileManager.vala"
	_tmp2_ = g_date_time_new_now (_tmp1_);
#line 45 "../src/Services/FileManager.vala"
	_tmp3_ = _tmp2_;
#line 45 "../src/Services/FileManager.vala"
	_g_time_zone_unref0 (_tmp1_);
#line 45 "../src/Services/FileManager.vala"
	name = _tmp3_;
#line 46 "../src/Services/FileManager.vala"
	_tmp4_ = quilter_services_file_manager_get_cache_path ();
#line 46 "../src/Services/FileManager.vala"
	_tmp5_ = _tmp4_;
#line 46 "../src/Services/FileManager.vala"
	_tmp6_ = g_date_time_to_string (name);
#line 46 "../src/Services/FileManager.vala"
	_tmp7_ = _tmp6_;
#line 46 "../src/Services/FileManager.vala"
	_tmp8_ = g_strconcat ("~", _tmp7_, ".md", NULL);
#line 46 "../src/Services/FileManager.vala"
	_tmp9_ = _tmp8_;
#line 46 "../src/Services/FileManager.vala"
	_tmp10_ = g_build_filename (_tmp5_, _tmp9_, NULL);
#line 46 "../src/Services/FileManager.vala"
	_tmp11_ = _tmp10_;
#line 46 "../src/Services/FileManager.vala"
	_g_free0 (_tmp9_);
#line 46 "../src/Services/FileManager.vala"
	_g_free0 (_tmp7_);
#line 46 "../src/Services/FileManager.vala"
	_g_free0 (_tmp5_);
#line 46 "../src/Services/FileManager.vala"
	result = _tmp11_;
#line 46 "../src/Services/FileManager.vala"
	_g_date_time_unref0 (name);
#line 46 "../src/Services/FileManager.vala"
	return result;
#line 456 "FileManager.c"
}

static const gchar*
string_to_string (const gchar* self)
{
	const gchar* result = NULL;
#line 1570 "glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, NULL);
#line 1571 "glib-2.0.vapi"
	result = self;
#line 1571 "glib-2.0.vapi"
	return result;
#line 469 "FileManager.c"
}

void
quilter_services_file_manager_save_file (const gchar* path,
                                         const gchar* contents,
                                         GError** error)
{
	GError* _inner_error0_ = NULL;
#line 49 "../src/Services/FileManager.vala"
	g_return_if_fail (path != NULL);
#line 49 "../src/Services/FileManager.vala"
	g_return_if_fail (contents != NULL);
#line 482 "FileManager.c"
	{
#line 51 "../src/Services/FileManager.vala"
		g_file_set_contents (path, contents, (gssize) -1, &_inner_error0_);
#line 51 "../src/Services/FileManager.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 488 "FileManager.c"
			goto __catch0_g_error;
		}
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* e = NULL;
		gchar* msg = NULL;
		GError* _tmp0_;
		const gchar* _tmp1_;
		gchar* _tmp2_;
		const gchar* _tmp3_;
		const gchar* _tmp4_;
		gchar* _tmp5_;
		gchar* _tmp6_;
#line 50 "../src/Services/FileManager.vala"
		e = _inner_error0_;
#line 50 "../src/Services/FileManager.vala"
		_inner_error0_ = NULL;
#line 53 "../src/Services/FileManager.vala"
		_tmp0_ = e;
#line 53 "../src/Services/FileManager.vala"
		_tmp1_ = _tmp0_->message;
#line 53 "../src/Services/FileManager.vala"
		_tmp2_ = g_strdup (_tmp1_);
#line 53 "../src/Services/FileManager.vala"
		msg = _tmp2_;
#line 54 "../src/Services/FileManager.vala"
		_tmp3_ = msg;
#line 54 "../src/Services/FileManager.vala"
		_tmp4_ = string_to_string (_tmp3_);
#line 54 "../src/Services/FileManager.vala"
		_tmp5_ = g_strconcat ("Error writing file: ", _tmp4_, NULL);
#line 54 "../src/Services/FileManager.vala"
		_tmp6_ = _tmp5_;
#line 54 "../src/Services/FileManager.vala"
		g_warning ("FileManager.vala:54: %s", _tmp6_);
#line 54 "../src/Services/FileManager.vala"
		_g_free0 (_tmp6_);
#line 50 "../src/Services/FileManager.vala"
		_g_free0 (msg);
#line 50 "../src/Services/FileManager.vala"
		_g_error_free0 (e);
#line 532 "FileManager.c"
	}
	__finally0:
#line 50 "../src/Services/FileManager.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 50 "../src/Services/FileManager.vala"
		g_propagate_error (error, _inner_error0_);
#line 50 "../src/Services/FileManager.vala"
		return;
#line 541 "FileManager.c"
	}
}

static gboolean
string_contains (const gchar* self,
                 const gchar* needle)
{
	gchar* _tmp0_;
	gboolean result = FALSE;
#line 1530 "glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, FALSE);
#line 1530 "glib-2.0.vapi"
	g_return_val_if_fail (needle != NULL, FALSE);
#line 1531 "glib-2.0.vapi"
	_tmp0_ = strstr ((gchar*) self, (gchar*) needle);
#line 1531 "glib-2.0.vapi"
	result = _tmp0_ != NULL;
#line 1531 "glib-2.0.vapi"
	return result;
#line 561 "FileManager.c"
}

gboolean
quilter_services_file_manager_is_temp_file (const gchar* path)
{
	gchar* _tmp0_;
	gchar* _tmp1_;
	gboolean _tmp2_;
	gboolean result = FALSE;
#line 58 "../src/Services/FileManager.vala"
	g_return_val_if_fail (path != NULL, FALSE);
#line 59 "../src/Services/FileManager.vala"
	_tmp0_ = quilter_services_file_manager_get_cache_path ();
#line 59 "../src/Services/FileManager.vala"
	_tmp1_ = _tmp0_;
#line 59 "../src/Services/FileManager.vala"
	_tmp2_ = string_contains (path, _tmp1_);
#line 59 "../src/Services/FileManager.vala"
	_g_free0 (_tmp1_);
#line 59 "../src/Services/FileManager.vala"
	result = _tmp2_;
#line 59 "../src/Services/FileManager.vala"
	return result;
#line 585 "FileManager.c"
}

static gpointer
_g_object_ref0 (gpointer self)
{
#line 64 "../src/Services/FileManager.vala"
	return self ? g_object_ref (self) : NULL;
#line 593 "FileManager.c"
}

static void
_vala_array_add15 (gchar** * array,
                   gint* length,
                   gint* size,
                   gchar* value)
{
#line 67 "../src/Services/FileManager.vala"
	if ((*length) == (*size)) {
#line 67 "../src/Services/FileManager.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 67 "../src/Services/FileManager.vala"
		*array = g_renew (gchar*, *array, (*size) + 1);
#line 608 "FileManager.c"
	}
#line 67 "../src/Services/FileManager.vala"
	(*array)[(*length)++] = value;
#line 67 "../src/Services/FileManager.vala"
	(*array)[*length] = NULL;
#line 614 "FileManager.c"
}

gboolean
quilter_services_file_manager_open_from_outside (QuilterMainWindow* win,
                                                 GFile** ofiles,
                                                 gint ofiles_length1,
                                                 const gchar* hint)
{
	GtkGrid* _tmp24_;
	GtkStack* _tmp25_;
	GError* _inner_error0_ = NULL;
	gboolean result = FALSE;
#line 63 "../src/Services/FileManager.vala"
	g_return_val_if_fail (win != NULL, FALSE);
#line 63 "../src/Services/FileManager.vala"
	g_return_val_if_fail (hint != NULL, FALSE);
#line 631 "FileManager.c"
	{
		GFile** f_collection = NULL;
		gint f_collection_length1 = 0;
		gint _f_collection_size_ = 0;
		gint f_it = 0;
#line 64 "../src/Services/FileManager.vala"
		f_collection = ofiles;
#line 64 "../src/Services/FileManager.vala"
		f_collection_length1 = ofiles_length1;
#line 64 "../src/Services/FileManager.vala"
		for (f_it = 0; f_it < f_collection_length1; f_it = f_it + 1) {
#line 643 "FileManager.c"
			GFile* _tmp0_;
			GFile* f = NULL;
#line 64 "../src/Services/FileManager.vala"
			_tmp0_ = _g_object_ref0 (f_collection[f_it]);
#line 64 "../src/Services/FileManager.vala"
			f = _tmp0_;
#line 650 "FileManager.c"
			{
				gchar* text = NULL;
				gchar* file_path = NULL;
				GFile* _tmp1_;
				gchar* _tmp2_;
				const gchar* _tmp3_;
				gchar* _tmp4_;
				GSettings* _tmp5_;
				gchar** _tmp6_;
				gint _tmp6__length1;
				gboolean _tmp7_ = FALSE;
				QuilterWidgetsSideBar* _tmp8_;
#line 66 "../src/Services/FileManager.vala"
				_tmp1_ = f;
#line 66 "../src/Services/FileManager.vala"
				_tmp2_ = g_file_get_path (_tmp1_);
#line 66 "../src/Services/FileManager.vala"
				file_path = _tmp2_;
#line 67 "../src/Services/FileManager.vala"
				_tmp3_ = file_path;
#line 67 "../src/Services/FileManager.vala"
				_tmp4_ = g_strdup (_tmp3_);
#line 67 "../src/Services/FileManager.vala"
				_vala_array_add15 (&quilter_services_file_manager_files, &quilter_services_file_manager_files_length1, &_quilter_services_file_manager_files_size_, _tmp4_);
#line 68 "../src/Services/FileManager.vala"
				_tmp5_ = quilter_application_gsettings;
#line 68 "../src/Services/FileManager.vala"
				_tmp6_ = quilter_services_file_manager_files;
#line 68 "../src/Services/FileManager.vala"
				_tmp6__length1 = quilter_services_file_manager_files_length1;
#line 68 "../src/Services/FileManager.vala"
				g_settings_set_strv (_tmp5_, "last-files", _tmp6_);
#line 69 "../src/Services/FileManager.vala"
				_tmp8_ = win->sidebar;
#line 69 "../src/Services/FileManager.vala"
				if (_tmp8_ != NULL) {
#line 687 "FileManager.c"
					GFile* _tmp9_;
#line 69 "../src/Services/FileManager.vala"
					_tmp9_ = f;
#line 69 "../src/Services/FileManager.vala"
					_tmp7_ = _tmp9_ != NULL;
#line 693 "FileManager.c"
				} else {
#line 69 "../src/Services/FileManager.vala"
					_tmp7_ = FALSE;
#line 697 "FileManager.c"
				}
#line 69 "../src/Services/FileManager.vala"
				if (_tmp7_) {
#line 701 "FileManager.c"
					QuilterWidgetsSideBar* _tmp10_;
					const gchar* _tmp11_;
					QuilterWidgetsSideBarBox* _tmp12_;
					QuilterWidgetsSideBarBox* _tmp13_;
#line 70 "../src/Services/FileManager.vala"
					_tmp10_ = win->sidebar;
#line 70 "../src/Services/FileManager.vala"
					_tmp11_ = file_path;
#line 70 "../src/Services/FileManager.vala"
					_tmp12_ = quilter_widgets_side_bar_add_file (_tmp10_, _tmp11_);
#line 70 "../src/Services/FileManager.vala"
					_tmp13_ = _tmp12_;
#line 70 "../src/Services/FileManager.vala"
					_g_object_unref0 (_tmp13_);
#line 716 "FileManager.c"
				}
				{
					const gchar* _tmp14_;
					gchar* _tmp15_ = NULL;
					QuilterWidgetsEditView* _tmp16_;
					GtkSourceBuffer* _tmp17_;
					const gchar* _tmp18_;
					QuilterWidgetsEditView* _tmp19_;
					GtkSourceBuffer* _tmp20_;
#line 73 "../src/Services/FileManager.vala"
					_tmp14_ = file_path;
#line 73 "../src/Services/FileManager.vala"
					g_file_get_contents (_tmp14_, &_tmp15_, NULL, &_inner_error0_);
#line 73 "../src/Services/FileManager.vala"
					_g_free0 (text);
#line 73 "../src/Services/FileManager.vala"
					text = _tmp15_;
#line 73 "../src/Services/FileManager.vala"
					if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 736 "FileManager.c"
						goto __catch0_g_error;
					}
#line 74 "../src/Services/FileManager.vala"
					_tmp16_ = win->edit_view_content;
#line 74 "../src/Services/FileManager.vala"
					_tmp17_ = _tmp16_->buffer;
#line 74 "../src/Services/FileManager.vala"
					_tmp18_ = text;
#line 74 "../src/Services/FileManager.vala"
					g_object_set ((GtkTextBuffer*) _tmp17_, "text", _tmp18_, NULL);
#line 75 "../src/Services/FileManager.vala"
					_tmp19_ = win->edit_view_content;
#line 75 "../src/Services/FileManager.vala"
					_tmp20_ = _tmp19_->buffer;
#line 75 "../src/Services/FileManager.vala"
					gtk_text_buffer_set_modified ((GtkTextBuffer*) _tmp20_, FALSE);
#line 76 "../src/Services/FileManager.vala"
					_g_object_unref0 (quilter_services_file_manager_file);
#line 76 "../src/Services/FileManager.vala"
					quilter_services_file_manager_file = NULL;
#line 757 "FileManager.c"
				}
				goto __finally0;
				__catch0_g_error:
				{
					GError* e = NULL;
					GError* _tmp21_;
					const gchar* _tmp22_;
#line 72 "../src/Services/FileManager.vala"
					e = _inner_error0_;
#line 72 "../src/Services/FileManager.vala"
					_inner_error0_ = NULL;
#line 78 "../src/Services/FileManager.vala"
					_tmp21_ = e;
#line 78 "../src/Services/FileManager.vala"
					_tmp22_ = _tmp21_->message;
#line 78 "../src/Services/FileManager.vala"
					g_warning ("FileManager.vala:78: Error: %s", _tmp22_);
#line 72 "../src/Services/FileManager.vala"
					_g_error_free0 (e);
#line 777 "FileManager.c"
				}
				__finally0:
#line 72 "../src/Services/FileManager.vala"
				if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 782 "FileManager.c"
					gboolean _tmp23_ = FALSE;
#line 72 "../src/Services/FileManager.vala"
					_g_free0 (file_path);
#line 72 "../src/Services/FileManager.vala"
					_g_free0 (text);
#line 72 "../src/Services/FileManager.vala"
					_g_object_unref0 (f);
#line 72 "../src/Services/FileManager.vala"
					g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 72 "../src/Services/FileManager.vala"
					g_clear_error (&_inner_error0_);
#line 72 "../src/Services/FileManager.vala"
					return _tmp23_;
#line 796 "FileManager.c"
				}
#line 64 "../src/Services/FileManager.vala"
				_g_free0 (file_path);
#line 64 "../src/Services/FileManager.vala"
				_g_free0 (text);
#line 64 "../src/Services/FileManager.vala"
				_g_object_unref0 (f);
#line 804 "FileManager.c"
			}
		}
	}
#line 81 "../src/Services/FileManager.vala"
	quilter_main_window_save_last_files (win);
#line 82 "../src/Services/FileManager.vala"
	_tmp24_ = win->welcome_view;
#line 82 "../src/Services/FileManager.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp24_, FALSE);
#line 83 "../src/Services/FileManager.vala"
	_tmp25_ = win->main_stack;
#line 83 "../src/Services/FileManager.vala"
	gtk_widget_set_visible ((GtkWidget*) _tmp25_, TRUE);
#line 84 "../src/Services/FileManager.vala"
	result = TRUE;
#line 84 "../src/Services/FileManager.vala"
	return result;
#line 822 "FileManager.c"
}

gchar*
quilter_services_file_manager_open (gchar* * contents)
{
	gchar* _vala_contents = NULL;
	GFile* _tmp11_;
	gchar* _tmp12_;
	GError* _inner_error0_ = NULL;
	gchar* result = NULL;
	{
		GtkFileChooserNative* chooser = NULL;
		GtkFileChooserNative* _tmp0_;
		GtkFileChooserNative* _tmp1_;
		GtkFileChooserNative* _tmp4_;
		GFile* _tmp5_;
		gchar* _tmp6_;
		gchar* _tmp7_;
		gchar* _tmp8_ = NULL;
#line 89 "../src/Services/FileManager.vala"
		_tmp0_ = quilter_services_dialog_utils_create_file_chooser (_ ("Open File"), GTK_FILE_CHOOSER_ACTION_OPEN);
#line 89 "../src/Services/FileManager.vala"
		chooser = _tmp0_;
#line 91 "../src/Services/FileManager.vala"
		_tmp1_ = chooser;
#line 91 "../src/Services/FileManager.vala"
		if (gtk_native_dialog_run ((GtkNativeDialog*) _tmp1_) == ((gint) GTK_RESPONSE_ACCEPT)) {
#line 850 "FileManager.c"
			GtkFileChooserNative* _tmp2_;
			GFile* _tmp3_;
#line 92 "../src/Services/FileManager.vala"
			_tmp2_ = chooser;
#line 92 "../src/Services/FileManager.vala"
			_tmp3_ = gtk_file_chooser_get_file ((GtkFileChooser*) _tmp2_);
#line 92 "../src/Services/FileManager.vala"
			_g_object_unref0 (quilter_services_file_manager_file);
#line 92 "../src/Services/FileManager.vala"
			quilter_services_file_manager_file = _tmp3_;
#line 861 "FileManager.c"
		}
#line 93 "../src/Services/FileManager.vala"
		_tmp4_ = chooser;
#line 93 "../src/Services/FileManager.vala"
		gtk_native_dialog_destroy ((GtkNativeDialog*) _tmp4_);
#line 94 "../src/Services/FileManager.vala"
		_tmp5_ = quilter_services_file_manager_file;
#line 94 "../src/Services/FileManager.vala"
		_tmp6_ = g_file_get_path (_tmp5_);
#line 94 "../src/Services/FileManager.vala"
		_tmp7_ = _tmp6_;
#line 94 "../src/Services/FileManager.vala"
		g_file_get_contents (_tmp7_, &_tmp8_, NULL, &_inner_error0_);
#line 94 "../src/Services/FileManager.vala"
		_g_free0 (_vala_contents);
#line 94 "../src/Services/FileManager.vala"
		_vala_contents = _tmp8_;
#line 94 "../src/Services/FileManager.vala"
		_g_free0 (_tmp7_);
#line 94 "../src/Services/FileManager.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 94 "../src/Services/FileManager.vala"
			_g_object_unref0 (chooser);
#line 885 "FileManager.c"
			goto __catch0_g_error;
		}
#line 88 "../src/Services/FileManager.vala"
		_g_object_unref0 (chooser);
#line 890 "FileManager.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* e = NULL;
		GError* _tmp9_;
		const gchar* _tmp10_;
#line 88 "../src/Services/FileManager.vala"
		e = _inner_error0_;
#line 88 "../src/Services/FileManager.vala"
		_inner_error0_ = NULL;
#line 96 "../src/Services/FileManager.vala"
		_tmp9_ = e;
#line 96 "../src/Services/FileManager.vala"
		_tmp10_ = _tmp9_->message;
#line 96 "../src/Services/FileManager.vala"
		g_warning ("FileManager.vala:96: Error: %s", _tmp10_);
#line 88 "../src/Services/FileManager.vala"
		_g_error_free0 (e);
#line 910 "FileManager.c"
	}
	__finally0:
#line 88 "../src/Services/FileManager.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 88 "../src/Services/FileManager.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 88 "../src/Services/FileManager.vala"
		g_clear_error (&_inner_error0_);
#line 88 "../src/Services/FileManager.vala"
		return NULL;
#line 921 "FileManager.c"
	}
#line 98 "../src/Services/FileManager.vala"
	_tmp11_ = quilter_services_file_manager_file;
#line 98 "../src/Services/FileManager.vala"
	_tmp12_ = g_file_get_path (_tmp11_);
#line 98 "../src/Services/FileManager.vala"
	result = _tmp12_;
#line 98 "../src/Services/FileManager.vala"
	if (contents) {
#line 98 "../src/Services/FileManager.vala"
		*contents = _vala_contents;
#line 933 "FileManager.c"
	} else {
#line 98 "../src/Services/FileManager.vala"
		_g_free0 (_vala_contents);
#line 937 "FileManager.c"
	}
#line 98 "../src/Services/FileManager.vala"
	return result;
#line 941 "FileManager.c"
}

static gpointer
_g_error_copy0 (gpointer self)
{
#line 122 "../src/Services/FileManager.vala"
	return self ? g_error_copy (self) : NULL;
#line 949 "FileManager.c"
}

void
quilter_services_file_manager_save_as (const gchar* contents,
                                       gchar* * path,
                                       GError** error)
{
	gchar* _vala_path = NULL;
	GtkFileChooserNative* chooser = NULL;
	GtkFileChooserNative* _tmp0_;
	GtkFileChooserNative* _tmp1_;
	GtkFileChooserNative* _tmp4_;
	GFile* _tmp5_;
	gchar* _tmp6_;
	gchar* _tmp7_;
	gchar* _tmp8_;
	gchar* _tmp9_;
	gboolean _tmp10_;
	GFile* _tmp17_;
	gchar* _tmp18_;
	GError* _inner_error0_ = NULL;
#line 101 "../src/Services/FileManager.vala"
	g_return_if_fail (contents != NULL);
#line 102 "../src/Services/FileManager.vala"
	_tmp0_ = quilter_services_dialog_utils_create_file_chooser (_ ("Save File"), GTK_FILE_CHOOSER_ACTION_SAVE);
#line 102 "../src/Services/FileManager.vala"
	chooser = _tmp0_;
#line 104 "../src/Services/FileManager.vala"
	_tmp1_ = chooser;
#line 104 "../src/Services/FileManager.vala"
	if (gtk_native_dialog_run ((GtkNativeDialog*) _tmp1_) == ((gint) GTK_RESPONSE_ACCEPT)) {
#line 981 "FileManager.c"
		GtkFileChooserNative* _tmp2_;
		GFile* _tmp3_;
#line 105 "../src/Services/FileManager.vala"
		_tmp2_ = chooser;
#line 105 "../src/Services/FileManager.vala"
		_tmp3_ = gtk_file_chooser_get_file ((GtkFileChooser*) _tmp2_);
#line 105 "../src/Services/FileManager.vala"
		_g_object_unref0 (quilter_services_file_manager_file);
#line 105 "../src/Services/FileManager.vala"
		quilter_services_file_manager_file = _tmp3_;
#line 992 "FileManager.c"
	}
#line 106 "../src/Services/FileManager.vala"
	_tmp4_ = chooser;
#line 106 "../src/Services/FileManager.vala"
	gtk_native_dialog_destroy ((GtkNativeDialog*) _tmp4_);
#line 107 "../src/Services/FileManager.vala"
	_tmp5_ = quilter_services_file_manager_file;
#line 107 "../src/Services/FileManager.vala"
	_tmp6_ = g_file_get_basename (_tmp5_);
#line 107 "../src/Services/FileManager.vala"
	_tmp7_ = _tmp6_;
#line 107 "../src/Services/FileManager.vala"
	_tmp8_ = g_utf8_strdown (_tmp7_, (gssize) -1);
#line 107 "../src/Services/FileManager.vala"
	_tmp9_ = _tmp8_;
#line 107 "../src/Services/FileManager.vala"
	_tmp10_ = !g_str_has_suffix (_tmp9_, ".md");
#line 107 "../src/Services/FileManager.vala"
	_g_free0 (_tmp9_);
#line 107 "../src/Services/FileManager.vala"
	_g_free0 (_tmp7_);
#line 107 "../src/Services/FileManager.vala"
	if (_tmp10_) {
#line 1016 "FileManager.c"
		GFile* _tmp11_;
		gchar* _tmp12_;
		gchar* _tmp13_;
		gchar* _tmp14_;
		gchar* _tmp15_;
		GFile* _tmp16_;
#line 108 "../src/Services/FileManager.vala"
		_tmp11_ = quilter_services_file_manager_file;
#line 108 "../src/Services/FileManager.vala"
		_tmp12_ = g_file_get_path (_tmp11_);
#line 108 "../src/Services/FileManager.vala"
		_tmp13_ = _tmp12_;
#line 108 "../src/Services/FileManager.vala"
		_tmp14_ = g_strconcat (_tmp13_, ".md", NULL);
#line 108 "../src/Services/FileManager.vala"
		_tmp15_ = _tmp14_;
#line 108 "../src/Services/FileManager.vala"
		_tmp16_ = g_file_new_for_path (_tmp15_);
#line 108 "../src/Services/FileManager.vala"
		_g_object_unref0 (quilter_services_file_manager_file);
#line 108 "../src/Services/FileManager.vala"
		quilter_services_file_manager_file = _tmp16_;
#line 108 "../src/Services/FileManager.vala"
		_g_free0 (_tmp15_);
#line 108 "../src/Services/FileManager.vala"
		_g_free0 (_tmp13_);
#line 1043 "FileManager.c"
	}
#line 111 "../src/Services/FileManager.vala"
	_tmp17_ = quilter_services_file_manager_file;
#line 111 "../src/Services/FileManager.vala"
	_tmp18_ = g_file_get_path (_tmp17_);
#line 111 "../src/Services/FileManager.vala"
	_g_free0 (_vala_path);
#line 111 "../src/Services/FileManager.vala"
	_vala_path = _tmp18_;
#line 1053 "FileManager.c"
	{
		GFile* _tmp19_;
#line 114 "../src/Services/FileManager.vala"
		_tmp19_ = quilter_services_file_manager_file;
#line 114 "../src/Services/FileManager.vala"
		if (_tmp19_ == NULL) {
#line 115 "../src/Services/FileManager.vala"
			g_warning ("FileManager.vala:115: User cancelled operation. Aborting.");
#line 1062 "FileManager.c"
		} else {
			const gchar* _tmp20_;
#line 117 "../src/Services/FileManager.vala"
			_tmp20_ = _vala_path;
#line 117 "../src/Services/FileManager.vala"
			quilter_services_file_manager_save_file (_tmp20_, contents, &_inner_error0_);
#line 117 "../src/Services/FileManager.vala"
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 1071 "FileManager.c"
				goto __catch0_g_error;
			}
#line 118 "../src/Services/FileManager.vala"
			_g_object_unref0 (quilter_services_file_manager_file);
#line 118 "../src/Services/FileManager.vala"
			quilter_services_file_manager_file = NULL;
#line 1078 "FileManager.c"
		}
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* e = NULL;
		GError* _tmp21_;
		const gchar* _tmp22_;
		gchar* _tmp23_;
		gchar* _tmp24_;
		GError* _tmp25_;
		GError* _tmp26_;
#line 113 "../src/Services/FileManager.vala"
		e = _inner_error0_;
#line 113 "../src/Services/FileManager.vala"
		_inner_error0_ = NULL;
#line 121 "../src/Services/FileManager.vala"
		_tmp21_ = e;
#line 121 "../src/Services/FileManager.vala"
		_tmp22_ = _tmp21_->message;
#line 121 "../src/Services/FileManager.vala"
		_tmp23_ = g_strconcat ("Unexpected error during save: ", _tmp22_, NULL);
#line 121 "../src/Services/FileManager.vala"
		_tmp24_ = _tmp23_;
#line 121 "../src/Services/FileManager.vala"
		g_warning ("FileManager.vala:121: %s", _tmp24_);
#line 121 "../src/Services/FileManager.vala"
		_g_free0 (_tmp24_);
#line 122 "../src/Services/FileManager.vala"
		_tmp25_ = e;
#line 122 "../src/Services/FileManager.vala"
		_tmp26_ = _g_error_copy0 (_tmp25_);
#line 122 "../src/Services/FileManager.vala"
		_inner_error0_ = _tmp26_;
#line 122 "../src/Services/FileManager.vala"
		_g_error_free0 (e);
#line 1115 "FileManager.c"
		goto __finally0;
	}
	__finally0:
#line 113 "../src/Services/FileManager.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 113 "../src/Services/FileManager.vala"
		g_propagate_error (error, _inner_error0_);
#line 113 "../src/Services/FileManager.vala"
		_g_object_unref0 (chooser);
#line 113 "../src/Services/FileManager.vala"
		return;
#line 1127 "FileManager.c"
	}
#line 101 "../src/Services/FileManager.vala"
	_g_object_unref0 (chooser);
#line 101 "../src/Services/FileManager.vala"
	if (path) {
#line 101 "../src/Services/FileManager.vala"
		*path = _vala_path;
#line 1135 "FileManager.c"
	} else {
#line 101 "../src/Services/FileManager.vala"
		_g_free0 (_vala_path);
#line 1139 "FileManager.c"
	}
}

